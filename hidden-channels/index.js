(function(h,a,n,u,o,P,R){"use strict";const{View:E,Text:g,Pressable:T}=a.findByProps("Button","Text","View"),C=a.findByProps("extractTimestamp"),l=n.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:n.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:P.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:P.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"}});function p({date:e}){return n.React.createElement(T,{style:l.dateContainer,onPress:function(){n.toasts.open({content:n.moment(e).toLocaleString(),source:R.getAssetIDByName("clock")})},onLongPress:function(){n.clipboard.setString(e.getTime().toString()),n.toasts.open({content:"Copied to clipboard"})}},n.React.createElement(g,{style:l.text},n.moment(e).fromNow()))}function x({channel:e}){return n.React.createElement(E,{style:l.container},n.React.createElement(g,{style:l.title},"This channel is hidden."),n.React.createElement(g,{style:l.text},"Topic: ",e.topic||"No topic.",`

`,"Creation date: ",n.React.createElement(p,{date:new Date(C.extractTimestamp(e.id))}),`

`,"Last message: ",e.lastMessageId?n.React.createElement(p,{date:new Date(C.extractTimestamp(e.lastMessageId))}):"No messages.",`

`,"Last pin: ",e.lastPinTimestamp?n.React.createElement(p,{date:new Date(e.lastPinTimestamp)}):"No pins."))}let c=[];function y(e){const d=a.findByProps("getChannel")?.getChannel,i=a.findByProps("ChannelTypes")?.ChannelTypes,f=a.findByProps("getChannelPermissions","can");if(!d||!i||!f)return o.logger.error("hidden-channels: Could not find core modules for isHidden check."),!1;let t=e;if(typeof t=="string"&&(t=d(t)),!t||[i.DM,i.GROUP_DM,i.GUILD_CATEGORY].includes(t.type))return!1;t.realCheck=!0;let s=!f.can(n.constants.Permissions.VIEW_CHANNEL,t);return delete t.realCheck,s}function M(){try{const e=a.findByProps("getChannelPermissions","can");e?c.push(u.after("can",e,function([t,s],r){return!s?.realCheck&&t===n.constants.Permissions.VIEW_CHANNEL?!0:r})):o.logger.error("hidden-channels: Failed to find Permissions module");const d=a.findByProps("transitionToGuild");d?c.push(u.instead("transitionToGuild",d,function(t,s){const[r,A]=t;!y(A)&&typeof s=="function"&&s(...t)})):o.logger.error("hidden-channels: Failed to find Router module");const i=a.findByProps("stores","fetchMessages");i?c.push(u.instead("fetchMessages",i,function(t,s){const[r]=t;!y(r)&&typeof s=="function"&&s(...t)})):o.logger.error("hidden-channels: Failed to find Fetcher module");const f=a.findByName("ChannelMessages",!1);f?c.push(u.instead("default",f,function(t,s){const r=t[0]?.channel;return!y(r)&&typeof s=="function"?s(...t):n.React.createElement(x,{channel:r})})):o.logger.error("hidden-channels: Failed to find ChannelMessages component")}catch(e){o.logger.error(`hidden-channels: onLoad error: ${e.message}`,e)}}var B={onLoad:M,onUnload:function(){for(const e of c)e()}};return h.default=B,Object.defineProperty(h,"__esModule",{value:!0}),h})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta,vendetta.ui,vendetta.ui.assets);
