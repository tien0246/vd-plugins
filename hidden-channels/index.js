(function(h,a,n,u,i,P,C){"use strict";const{View:R,Text:p,Pressable:E}=a.findByProps("Button","Text","View"),T=a.findByProps("extractTimestamp"),c=n.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:n.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:P.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:P.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"}});function y({date:e}){return n.React.createElement(E,{style:c.dateContainer,onPress:function(){n.toasts.open({content:n.moment(e).toLocaleString(),source:C.getAssetIDByName("clock")})},onLongPress:function(){n.clipboard.setString(e.getTime().toString()),n.toasts.open({content:"Copied to clipboard"})}},n.React.createElement(p,{style:c.text},n.moment(e).fromNow()))}function w({channel:e}){return n.React.createElement(R,{style:c.container},n.React.createElement(p,{style:c.title},"This channel is hidden."),n.React.createElement(p,{style:c.text},"Topic: ",e.topic||"No topic.",`

`,"Creation date: ",n.React.createElement(y,{date:new Date(T.extractTimestamp(e.id))}),`

`,"Last message: ",e.lastMessageId?n.React.createElement(y,{date:new Date(T.extractTimestamp(e.lastMessageId))}):"No messages.",`

`,"Last pin: ",e.lastPinTimestamp?n.React.createElement(y,{date:new Date(e.lastPinTimestamp)}):"No pins."))}let d=[];function g(e){const r=a.findByProps("getChannel")?.getChannel,o=a.findByProps("ChannelTypes")?.ChannelTypes,f=a.findByProps("getChannelPermissions","can");if(!r||!o||!f)return i.showToast("hidden-channels: Could not find core modules"),!1;let t=e;if(typeof t=="string"&&(t=r(t)),!t||[o.DM,o.GROUP_DM,o.GUILD_CATEGORY].includes(t.type))return!1;t.realCheck=!0;let s=!f.can(n.constants.Permissions.VIEW_CHANNEL,t);return delete t.realCheck,s}function x(){i.showToast("hidden-channels: onLoad called (v1)");try{const e=a.findByProps("getChannelPermissions","can");e?d.push(u.after("can",e,function([t,s],l){return!s?.realCheck&&t===n.constants.Permissions.VIEW_CHANNEL?!0:l})):i.showToast("hidden-channels: Failed to find Permissions module");const r=a.findByProps("transitionToGuild");r?d.push(u.instead("transitionToGuild",r,function(t,s){const[l,B]=t;!g(B)&&typeof s=="function"&&s(...t)})):i.showToast("hidden-channels: Failed to find Router module");const o=a.findByProps("stores","fetchMessages");o?d.push(u.instead("fetchMessages",o,function(t,s){const[l]=t;!g(l)&&typeof s=="function"&&s(...t)})):i.showToast("hidden-channels: Failed to find Fetcher module");const f=a.findByName("MessagesWrapperConnected",!1);f?d.push(u.instead("default",f,function(t,s){const l=t[0]?.channel;return!g(l)&&typeof s=="function"?s(...t):n.React.createElement(w,{channel:l})})):i.showToast("hidden-channels: Failed to find MessagesConnected")}catch(e){i.showToast(`hidden-channels: onLoad error: ${e.message}`)}}var M={onLoad:x,onUnload:function(){for(const e of d)e()}};return h.default=M,Object.defineProperty(h,"__esModule",{value:!0}),h})({},vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui.toasts,vendetta.ui,vendetta.ui.assets);
